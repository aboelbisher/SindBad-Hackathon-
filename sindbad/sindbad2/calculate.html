<!DOCTYPE html>
<html>
<head>
    <title>Fly High a Travel Category Flat Bootstarp Resposive Website Template | Home :: w3layouts</title>
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/style2.css" rel="stylesheet" type="text/css" media="all" />

    <link href="css/main.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/normalize.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css/bootstrap-slider.css" rel="stylesheet" type="text/css" media="all" />

    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
    <!-- js -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap-slider.js"></script>
    <script src="js/modernizr.js"></script>
    <!-- //js -->
    <!-- for-mobile-apps -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Fly High Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template,
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
    <script type="application/x-javascript">
        addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
           function hideURLbar(){ window.scrollTo(0,1); } </script>
    <!-- //for-mobile-apps -->
    <!-- start-smoth-scrolling -->
    <script type="text/javascript" src="js/move-top.js"></script>
    <script type="text/javascript" src="js/easing.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>

    <script type="text/javascript">
        function endwith(str, suffix) {
            return str.indexOf(suffix, str.length - suffix.length) !== -1;
        }

        function setMarkers(map, attractions, hotels) {

            var image = 'Hotel.png';

            for (var i = 0; i < attractions.length; i++) {
                var att = attractions[i];
                var myLatLng = new google.maps.LatLng(att[0], att[1]);
                var marker = new google.maps.Marker({
                    position: myLatLng,
                    map: map,
                });
            }
            for (var i = 0; i < hotels.length; i++) {
                var hotel = hotels[i];
                var myLatLng = new google.maps.LatLng(hotel[0], hotel[1]);
                var marker = new google.maps.Marker({
                    position: myLatLng,
                    map: map,
                    icon: image
                });
            }

            var hotel = hotels[0];
            var myLatLng = new google.maps.LatLng(hotel[0], hotel[1]);
            map.setCenter(myLatLng);
        }

        jQuery(document).ready(function ($) {
            $(".scroll").click(function (event) {
                event.preventDefault();
                $('html,body').animate({ scrollTop: $(this.hash).offset().top }, 1000);
            });




            $.ajax({
                url: "/data/countries.json",
                success: function (data) {
                    console.dir(data);
                    var obj = data;
                    obj.forEach(function (country) {
                        $("#from-coutnry").append("<option>" + country.name + "</option>");
                        $("#to-coutnry").append("<option>" + country.name + "</option>");
                    });
                }
            });


            $("#ex2").slider({
                scale: 'logarithmic'
            });
            $("#ex11").slider({
                step: 1, min: 1, max: 5, range: true, value: [3, 4],
                ticks: [1, 2, 3, 4, 5]
            });

            $("#ex13").slider({});

            //$(".first").click(function () {
            //    var myLatlng = new google.maps.LatLng(32.8167, 34.9833);
            //    var mapOptions = {
            //        zoom: 11,
            //        center: myLatlng
            //    }
            //    var map = new google.maps.Map(document.getElementsByClassName('map2')[0], mapOptions);
            //    $(".row.extra").slideUp();
            //    $(this).siblings(".extra").slideToggle();
            //    for (var i = 0; i < document.getElementsByClassName('map2').length; i++) {
            //        google.maps.event.trigger(document.getElementsByClassName('map2')[i], 'resize');
            //        map.setCenter(new google.maps.LatLng(32.8167, 34.9833), 11);
            //    }

                
            //});

            $("#to2").click(function () {
              
                
                var str = "";
                $(".option").toArray().forEach(function (category) {
                    var url = $(category).css("background-image");
                    if (!endwith(url, "2.png)")) {
                        url = url.replace(".png)", "");

                        url = url.slice(url.indexOf("icons/") + 6);
                        str += url;
                        str += "|";
                        if (url == "zoo") {
                            str += "aquarium|";
                        }
                        if (url == "museum") {
                            str += "art_gallery|";
                        }
                        if (url == "restaurant") {
                            str += "food|";
                        }
                    }
                });
                str += ")";
                str = str.replace("|)", "");

                if (str == ")") {
                    alert("You have to select al least one category ");
                }
                if ($("#from-coutnry").val() == "" ||
                       $("#to-coutnry").val() == "" ||
                      $("#from-date").val() == "" ||
                      $("#to-date").val() == ""
                    ) {
                    alert("Missing fields");
                    return;
                }

                /*
                */
                $("#steps").slideUp();
                $("#loader22").slideDown();
                $.post("/api/SindbadAPI", {
                    "fromCityName": $("#from-city").val() + " " + $("#from-coutnry").val(),
                    "toCityName": $("#to-city").val() + " " + $("#to-coutnry").val(),
                    "maxPrice": $("#ex2").val(),
                    "startDate": $("#from-date").val(),
                    "endDate": $("#to-date").val(),
                    "adultsNum": $("#adults").val(),
                    "childrenNum": $("#children").val(),
                    "infantsNum": $("#infants").val(),
                    "direct": "false",
                    "travelClass": $("#ex13").val(),
                    "attractions": str,
                    "ifCar": $("#carC").is(':checked')
                })                                                                  
                .done(function (data) {












                    console.dir(data.data);
                    $("#loader22").slideUp();
                    $("#resualt").css("opacity", "1");

                    data.data.trip.outBound.forEach(function(tt){
                        $("#flight").append(" <div class='row'>\
                                <div class='col-md-3'>" + tt.companyIATA + tt.flightNumber + " </div>\
                                <div class='col-md-9'> " + tt.from.name + " ," + tt.DepartTime + " ->" + tt.to.name + " ," + tt.ArrivingTime + " </div>\
                            </div>");
                    });

                    data.data.trip.inBound.forEach(function (tt) {
                        $("#flight2").append(" <div class='row'>\
                                <div class='col-md-3'>" + tt.companyIATA + tt.flightNumber + " </div>\
                                <div class='col-md-9'> " + tt.from.name + " ," + tt.DepartTime + " ->" + tt.to.name + " ," + tt.ArrivingTime + " </div>\
                            </div>");
                    });
                    $("#flight2").after("<div style='color:#22aa33;float:left;margin-left:170px;'>Total :$"+data.data.trip.price+"</div>");
                    if (!data.data.ifCar) {
                        $('#cartitle').hide();
                    }else{
                    data.data.cars.cars.forEach(function (car) {
                        $("#cars").append(" <div class='car'> <div class='card-head'> <div class='car-image' style='background-image:url(" + car.imageUrl1.m_url.m_urlOriginal + ")'></div>\
<div class='car-model'>" + car.providerName + "</div> <div class='payment'> \
                                    <div class='car-prise'>" + car.estimatedTotal1 + "$</div>\
                                    <div class='payment-plan'>Total</div>\
                                </div>\
                            </div>\
                            <div class='card-body'>\
                                <div class='adress'>"+car.city+" "+car.line1+"</div>\
                            </div>\
                        </div>");

                    });
                    }
                    var hotels = [];
                    var attractions = [];
                    data.data.hotels.forEach(function(hotel){
                        $('#hotels').append(" <div class='aa'>\
                      <div class='row first'>\
                           <input class='attu' type='hidden' value='"+hotel.location.Latitude+"'> \
                            <input class='lattu' type='hidden' value='" + hotel.location.Longitude + "'> \
                          <div class='col-md-1 image'></div>\
                          <div class='col-md-9 hotel'>" +hotel.name + "<span class='prise'>$" + hotel.Price + " /Trip</span></div>\
                          <div class='col-md-2'><div class='star'> "+hotel.Rating+"/5 </div></div> </div>\
                      <div class='row extra'>\
                          <div class='col-md-7 textt'>" + hotel.ShortDesc.slice(43) + "</div>\
                          <div class='col-md-5  map-continer'> <div class='map2'></div></div>\
                      </div>\
                  </div>");
                        hotels.push([hotel.location.Latitude,hotel.location.Longitude]);
                    });
                    for (var i = 0; i < document.getElementsByClassName("first").length; i++) {
                        document.getElementsByClassName("first")[i].addEventListener("click", function () {

                            console.dir($(document.getElementsByClassName("map2")[i]).find(".attu").value);
                           
                           
                            $(".row.extra").slideUp();
                            $(this).siblings(".extra").slideToggle();
                            for (var i = 0; i < document.getElementsByClassName('map2').length; i++) {
                                var myLatlng = new google.maps.LatLng(parseFloat($(document.getElementsByClassName("map2")[i]).find(".attu").value), parseFloat($(document.getElementsByClassName("map2")[i]).find(".lattu").value));
                                var mapOptions = {
                                    zoom: 11,
                                    center: myLatlng
                                }
                                var map = new google.maps.Map(document.getElementsByClassName("map2")[i], mapOptions);
                                //google.maps.event.trigger(this, 'resize');
                                //map.setCenter(myLatlng, 11);
                            }
                        });
                    }
                    for (var key in data.data.randomisedAttractions) {
                        $("#schedule").append('<div class="row date">' + key.toString().slice(0,key.toString().length-9) + ' </div> ');
                        for (var i = 0; i< data.data.randomisedAttractions[key].length; i++) {
                            $("#schedule").append('<div class="row atr">' + data.data.randomisedAttractions[key][i].name + ' <br/><div class="star" style="margin:auto;">' + data.data.randomisedAttractions[key][i].rating + '</div><br>' + data.data.randomisedAttractions[key][i].vicinty + ' </div> ');
                            attractions.push([data.data.randomisedAttractions[key][i].location.First, data.data.randomisedAttractions[key][i].location.Second]);
                        }
                    }


                    var mapOptions = {
                        zoom: 11
                    }
                    var map = new google.maps.Map(document.getElementById('map3'),
                                                  mapOptions);

                    setMarkers(map, attractions, hotels);

                  
                })
                .fail(function () {
                    alert("error");
                });
                
                console.log(str);
            });

            $(".option").on("mouseenter", function () {
                $(this).css("opacity", "0.7");
            });
            $(".option").on("mouseleave", function () {
                $(this).css("opacity", "1");
            });
            $(".option").on("click", function () {
                var url = $(this).css("background-image");
                if (endwith(url, "2.png)")) {
                    url = url.replace("2.png)", ".png)");
                } else {
                    url = url.replace(".png)", "2.png)");
                }
                $(this).css("background-image", url);
            });
        });
    </script>

    <link rel="stylesheet" href="css/main2.css">
    <style type="text/css">
        .back-link a {
            color: #4ca340;
            text-decoration: none;
            border-bottom: 1px #4ca340 solid;
        }

            .back-link a:hover,
            .back-link a:focus {
                color: #408536;
                text-decoration: none;
                border-bottom: 1px #408536 solid;
            }

        h1 {
            height: 100%;
            /* The html and body elements cannot have any padding or margin. */
            margin: 0;
            font-size: 14px;
            font-family: 'Open Sans', sans-serif;
            font-size: 32px;
            margin-bottom: 3px;
        }

        .entry-header {
            text-align: left;
            margin: 0 auto 50px auto;
            width: 80%;
            max-width: 978px;
            position: relative;
            z-index: 10001;
        }

        #demo-content {
            padding-top: 100px;
        }
    </style>
   
    <!-- start-smoth-scrolling -->
</head>

<body>
    
    <!-- banner -->
    <div id="home">

        <div class="navigation">
            <div class="container">
                <div class="navi">
                    <div class="head-logo">
                        <a href="index.html"><img src="images/logo.png" alt=" "></a>
                    </div>


                </div>
            </div>



        </div>

    </div>

    <div id="steps">



        <div class="contact11" style="background:url('images/yourtravel.png') 0 -60px; no-repeat cover">
            <div>
                <span>Your Trip</span>
            </div>
        </div>





        <div id="step-1">

            <div class="row">  </div>
            <div class="row">
                <div class="col-md-2">Your Laction:</div>
                <div class="col-md-4"><select class="form-control" width="200" class="" id="from-coutnry"> </select> </div>

                <div class="col-md-2">Destination:</div>
                <div class="col-md-4">  <select class="form-control" id="to-coutnry"> </select></div>
            </div>
            <div class="row">
                <div class="col-md-2">City:</div>
                <div class="col-md-4">  <input class="form-control" type="text" id="from-city"> </select></div>
                <div class="col-md-2">City:</div>
                <div class="col-md-4">  <input class="form-control" type="text" id="to-city"> </select></div>
            </div>
            <div class="row">
                <div class="col-md-2">From Date: </div>
                <div class="col-md-4"> <input class="form-control" id="from-date" type="date" name="bday"></div>
                <div class="col-md-2">To Date:</div>
                <div class="col-md-4"> <input class="form-control" id="to-date" type="date" name="bday" /></div>
            </div>
            <div class="row">  </div>
            <div class="row" style="width:65%;margin:25px auto 5px!important; text-align:center;">
                <div class="col-md-4">Infants</div>
                <div class="col-md-4">Childern</div>
                <div class="col-md-4">Adults</div>
            </div>
            <div class="row" style="width:65%;margin: 5px auto 30px!important;">
                <div class="col-md-4"><input id="infants" class="form-control" min="0" step="1" value="0" type="number" /></div>
                <div class="col-md-4"><input id="children" class="form-control" min="0" step="1" value="0" type="number" /></div>
                <div class="col-md-4"><input id="adults" class="form-control" min="0" value="0" step="1" type="number" /></div>
            </div>
            <div class="row">  </div>
            <div class="row">

                <div class="col-md-2">Budget</div>
                <div class="col-md-10"> <input id="ex2" class="form-control" type="text" class="span2" value="" data-slider-min="100" data-slider-max="50000" data-slider-data-slider-value="[250,4500]" /> <b>$ 50000</b></div>
            </div>
            <div class="row">
                <div class="col-md-2">Hotel's stars</div>
                <div class="col-md-10"> <input class="form-control" id="ex11" type="text" /></div>
            </div>
            <div class="row">
                <div class="col-md-2"> Travel Class</div>
                <div class="col-md-10">  <input id="ex13" class="form-control" type="text" data-slider-value="2" data-slider-max="4" data-slider-min="1" /></div>

            </div>
            <div class="row">
                <div class="col-md-2"> Rent A Car</div>
                <div class="col-md-10"> <input style="float:left;" type="checkbox" id="carC" /></div>

            </div>



        </div>

        <div class="clearfix"> </div>
        <div class="clearfix"> </div>
        <div class="clearfix"> </div>
        <div class="contact11" style="background:url('images/style.png') 0 -260px; ">
            <div>
                <span>Your Style</span>
            </div>
        </div>


        <div id="step-2">
            <div class="row" style="width:684px!important;margin:30px auto;">
                <div class="option" style="background-image:url('images/icons/bar2.png');"><p>Bar</p></div>
                <div class="option" style="background-image:url('images/icons/casino2.png');"><p>Casino</p></div>
                <div class="option" style="background-image:url('images/icons/night_club2.png');"><p>Disco</p></div>
                <div class="option" style="background-image:url('images/icons/cafe2.png');"><p>Coffee Shop</p></div>
                <div class="option" style="background-image:url('images/icons/restaurant2.png');"><p>Restaurant</p></div>
                <div class="option" style="background-image:url('images/icons/amusement_park2.png');"><p>Amusement</p></div>

            </div>
            <div class="row" style="width:570px!important;margin:30px auto;">
                <div class="option" style="background-image:url('images/icons/bowling_alley2.png');"><p>Bowling</p></div>
                <div class="option" style="background-image:url('images/icons/zoo2.png');"><p>Zoo</p></div>
                <div class="option" style="background-image:url('images/icons/museum2.png');"><p>Landmarks</p></div>
                <div class="option" style="background-image:url('images/icons/spa2.png');"><p>Spa</p></div>
                <div class="option" style="background-image:url('images/icons/movie_theater2.png');"><p>Cinema</p></div>


            </div>
            <div class="row">
                <div class="clearfix"> </div>
                <input id="to2" class="btn-lg btn btn-primary" class="form-control" type="submit" value="Done" />
            </div>
        </div>
    </div>
    <div id="loader22">

        <div id="demo-content">

            <div id="loader-wrapper">
                <div id="loader"></div>
            </div>
        </div>
    </div>
    <div id="resualt">
        <div class="contact11" style="background:url('/images/airplane.png');background-position-y:-60px;">
            <div>
                <span style="text-shadow: 0 0 2px #aaa;">  Your Flight</span>
            </div>
        </div>

        <div id="flight">
          

        </div>
        <h2 style="text-align:center;"> Back to home</h2>
        <div id="flight2">


        </div>
        <div class="clearfix"> </div>
        <div class="contact11" id="cartitle" style="background:url('/images/car.jpg');background-position-y:-280px;">
            <div>
                <span style="text-shadow: 0 0 2px #aaa;">Your Rented Car</span>
            </div>
        </div>
        <div id="cars">
               
        </div>


        <div class="clearfix"> </div>
        <div class="contact11" style="background:url('/images/hotel.png');background-position-y:0;">
            <div>
                <span style="text-shadow: 0 0 2px #aaa;">Your Hotel</span>
            </div>
        </div>
        <div id="hotels">
         

        </div>

        <div class="clearfix"> </div>
        <div class="contact11" style="background:url('/images/schedule.png');background-position-y:0;">
            <div>
                <span style="text-shadow: 0 0 2px #aaa;">Your Schedule</span>
            </div>
        </div>
        <div id="schedule">
          
            
        </div>

        <div id="map3" style="width:100%;height:250px;">

        </div>


    </div>







    <!-- footer -->
    <div class="footer">
        <div class="container">
            <div class="footer-logo">
                <div class="footer-logo-left">
                </div>
                <div class="footer-logo-right">

                    <p><a href="#">Sindbad</a></p>
                </div>
                <div class="clearfix"> </div>
            </div>

            <div class="clearfix"> </div>
        </div>


</body>

</html>